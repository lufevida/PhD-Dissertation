%--------------------------------------------------------------------------
\chapter{THEORETICAL FRAMEWORK}

%--------------------------------------------------------------------------
\section{Elementary Music Theory}

% Music has become an almost arbitrary matter, and composers will no longer be bound
% by laws and rules, but avoid the names of School and Law as they would Death itself...
% -- Johann Joseph Fux

%--------------------------------------------------------------------------
\begin{definition}
	Let $x$ and $y$ be arbitrary pitches. The \textbf{ordered pitch interval} between
	$x$ and $y$ is given by
	\begin{equation}
		i(x, y) = y - x \enspace.
	\end{equation}
	The \textbf{ordered pitch-class interval} between $x$ and $y$ is given by
	\begin{equation}
		i(\bar{x}, \bar{y}) = \bar{y} - \bar{x} \enspace.
	\end{equation}
	The \textbf{unordered pitch interval} between $x$ and $y$ is given by
	\begin{equation}
		\bar{i}(x, y) = |x - y| \enspace.
	\end{equation}
	The \textbf{unordered pitch-class interval}, or simply interval class, between
	$x$ and $y$ is given by
	\begin{equation}
		\bar{i}(\bar{x}, \bar{y}) = \min\{i(\bar{x}, \bar{y}), i(\bar{y}, \bar{x})\} \enspace.
	\end{equation}
\end{definition}

%--------------------------------------------------------------------------
\begin{example}
	Put $x = 43$ and $y = -13$. Then
	\begin{gather}
		i(x, y) = -56 \\
		i(\bar{x}, \bar{y}) = \overline{11} - \bar{7} = \bar{4} \\
		\bar{i}(x, y) = 56 \\
		\bar{i}(\bar{x}, \bar{y}) = \bar{4}
	\end{gather}
	Whenever the context is clear, we shall drop quotient notation and subscripts.
	In most situations, we are interested in the interval class between $x$ and $y$,
	in which case we will simply write $i(7, -1) = 4$. Interval classes can also be
	seen graph-theoretically as the edge connecting two members of a pitch-class set,
	displayed clockwise.
\end{example}

%--------------------------------------------------------------------------
% TODO show that interval classes are equivalence relations.

%--------------------------------------------------------------------------
\begin{theorem}
	\label{rahn-common-tone}
	\cite[10]{Rahn1975}
	The number of common tones between a set $S$ and some transposition of itself is given by
	\begin{equation}
		|S \cap \T_n(S)| = |\{x - y = n : x, y \in S\}| \enspace.
	\end{equation}
	The number of common tones between a set $S$ and some inversion of itself is given by
	\begin{equation}
		|S \cap \T_n\I(S)| = 2 \cdot |\{x + y = n : x, y \in S\}| +
		|\{a \in S : 2a = n\}| \enspace.
	\end{equation}
	Moreover, the cardinality of the set $\{a \in S : 2a = n\}$ is at most 2.
\end{theorem}

%--------------------------------------------------------------------------
\begin{example}
	\label{rahn-example}
	\cite[11]{Rahn1975}
	Write $S = \{ 0, 1, 4, 5, 8, 9 \}$ and consider some inversion operation. We have
	\begin{equation}
		\begin{array}{ *{13}{c} }
			n & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 \\
			2 \cdot |\{x + y = n : x, y \in S\}| &
			2 & 6 & 2 & 0 & 2 & 6 & 2 & 0 & 2 & 6 & 2 & 0 \\
			|\{a \in S : 2a = n\}| & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 \\
			Total & 3 & 6 & 3 & 0 & 3 & 6 & 3 & 0 & 3 & 6 & 3 & 0
		\end{array}
	\end{equation}
\end{example}

%--------------------------------------------------------------------------
\begin{proposition}
	\label{morris-mallalieu}
	\cite[17]{Morris1976}
	A 12-tone row has the mallalieu property if and only if it is related by $\T_n\M\I$
	to the row $S = \{ 0, 1, 4, 2, 9, 5, 11, 3, 8, 10, 7, 6 \}$.
	\begin{proof}
		One direction is just the straightforward check that every $\T_n\M\I$ transform of
		$S$ possesses the mallalieu property and is left to the reader. Conversely, if a
		row $R$ in its untransposed prime form has the mallalieu property, then there is
		a transposition that takes its order numbers in zeroth rotation, that is, the set
		$\{ 0, 1, 2, \dots, 11 \}$ to its order numbers in, say, first rotation, id est,
		the set $\{ 1, 3, \dots, 11, 0, 2, \dots, 10 \}$. We can write this transposition
		as a permutation $0 \mapsto 1, 1 \mapsto 3, \dots, 11 \mapsto 10 $, or in cycle
		notation as $T_k = ( 0 \; 1 \; 3 \; 7 \; 2 \; 5 \; 11 \; 10 \; 8 \; 4 \; 9 \; 6 )$.
		Note that $\T_k$ is an operation on order numbers. Since $\T_k$ is a transposition,
		there are only four candidates for $k$, namely $k \in \{ 1, 5, 7, 11 \}$
		(because these are the only indices for which a transposition in cycle notation is
		a 12-cycle). Moreover, we do not need to consider the cases where
		$k \in \{5, 7, 11\}$, as $tra_5 = \M \circ \T_1$, $\T_7 = \M\I \circ \T_1$,
		and $\T_{11} = \I \circ \T_1$. Hence, without loss, we can set $k = 1$. But then
		$S$ is the only row in untransposed prime form where $\T_1$ induces the permutation
		$\T_k$ from its order numbers in zeroth rotation to its order numbers in first
		rotation (just equate $\T_k$ with $\T_1$), completing the proof.
	\end{proof}
\end{proposition}

%--------------------------------------------------------------------------
\cite[278]{Lewin1966} provides a way of looking at mallalieu rows from the standpoint of
replacing, for any 12-tone row, its order-number row $\{ 0, 1, \dots, 11 \}$ by the array
of integers $\{ 1, 2, \dots, 12, 0 \}$ modulo 13. It is easy to see that such an array has
the same structure as the array $S_*$ we constructed above if we substitute the asterisk
by the number 12 and consider multiplication as the group operation. Obviously, this is
just the isomorphism between the integers modulo 12 and the group of units modulo 13.
One of the advantages of this approach is that we can dispense with the extra symbol
altogether and just use the indices from 1 to $p - 1$. We shall, however, still refer to
the row of order numbers as $S^*$, the context making it clear whether we are constructing
it with an asterisk or not. The process of taking every $n^\text{th}$ element of a 12-tone
row becomes then just the aforementioned multiplicative group operation on order numbers,
that is, multiplying order numbers by $k \pmod{13}$ is the same as taking every
$k^\text{th}$ element of a row.

%--------------------------------------------------------------------------
\begin{example}
	Put $S = \{ 0, 1, \dots, 11 \}$ and $S^* = \{ 1, 2, \dots, 12 \}$. Then
	\begin{equation}
		\M_3 \circ S^* = \{ 3, 6, \dots, 10 \} \enspace,
	\end{equation}
	which corresponds to the row $R = \{ 2, 5, \dots, 9 \}$. The row $R$ can be
	equivalently constructed by placing an asterisk as the $13^\text{th}$ order number of
	$S$ and taking every third element. The fact that $R$ and $S$ are not related by
	$\T_n\M\I$ reflects the fact that neither $S$ nor $R$ have the mallalieu property.
\end{example}

%--------------------------------------------------------------------------
\begin{proposition}
	\label{lewin-mallalieu}
	\cite[285]{Lewin1966}
	For $p$ a prime, every $(p - 1)$-TET system is capable of producing a mallalieu row.
	\begin{proof}
		For every prime $p$, the group of units modulo $p$ is isomorphic to
		$\mathbb{Z} / (p - 1) \mathbb{Z}$. The mallalieu property in these cases can be
		seen as the aforementioned isomorphism, where $\mathbb{Z} / (p - 1) \mathbb{Z}$
		is the group of transpositions of a row, and $(\mathbb{Z} / p \mathbb{Z})^\times$
		is its multiplicative group on order numbers. The number of mallalieu rows in each
		$(p - 1)$-TET system is then the number of isomorphisms
		$\mathbb{Z} / (p - 1) \mathbb{Z} \to (\mathbb{Z} / p \mathbb{Z})^\times$, that is,
		the order of the group of automorphisms of $\mathbb{Z} / (p - 1) \mathbb{Z}$.
		Since for every prime $p$ we have $|\Aut(\mathbb{Z} / (p - 1) \mathbb{Z})| \geq 1$,
		every $(p - 1)$-TET system is capable of producing a mallalieu row, as desired.
	\end{proof}
\end{proposition}

%--------------------------------------------------------------------------
In face of \ref{lewin-mallalieu}, \ref{morris-mallalieu} becomes just the special case
where $p = 13$, as seen in the next example:

%--------------------------------------------------------------------------
\begin{example}
	\cite[8]{Lewin1976a}
	\cite[9]{Babbitt1976}
	The number of isomorphisms
	$\mathbb{Z} / 12 \mathbb{Z} \to (\mathbb{Z} / 13 \mathbb{Z})^\times$ is equal to
	\begin{equation}
		|\Aut\big((\mathbb{Z} / 12 \mathbb{Z})^\times\big)| = 4 \enspace.
	\end{equation}
	We can construct these isomorphisms by mapping a generator of
	$\mathbb{Z} / 12 \mathbb{Z}$, say $\bar{1}$, to the generators of
	$(\mathbb{Z} / 13 \mathbb{Z})^\times$, namely $\bar{2}, \bar{6}, \bar{7}$ and
	$\overline{11}$. Explicitly, we get the four maps $i \pmod{12} \mapsto 2^i \pmod{13}$,
	$i \pmod{12} \mapsto 6^i \pmod{13}$, $i \pmod{12} \mapsto 7^i \pmod{13}$, and
	$i \pmod{12} \mapsto 11^i \pmod{13}$. We leave the verification that these maps are
	well defined and bijective to the reader. Denote the first map by $\varphi$. Then
	\begin{equation}
		\varphi(a + b) = 2^{a + b} = 2^a \cdot 2^b = \varphi(a) \cdot \varphi(b) \enspace,
	\end{equation}
	so $\varphi$ is an isomorphism. The verification that the other three maps are
	isomorphisms is identical. Define
	$\varphi^{-1} : (\mathbb{Z} / 13 \mathbb{Z})^\times \to \mathbb{Z} / 12 \mathbb{Z}$ by
	$\varphi^{-1}(\log i \pmod{13}) = i \pmod{12}$. Then $\varphi^{-1}$ is easily seen to
	be the inverse of $\varphi$. Let $S^* = \{ 1, 2, \dots, 12 \}$ be a series of order
	numbers written multiplicatively. Then
	\begin{equation}
		\varphi^{-1}(S^*) = \{ \log 1, \log 2, \dots, \log 12 \} \pmod{13} =
		\{ 0, 1, 4, \dots, 7, 6 \} \enspace,
	\end{equation}
	which by \ref{morris-mallalieu} is one of the four 12-tone rows with the mallalieu
	property.
\end{example}

%--------------------------------------------------------------------------
It should be of interest to many composers whether other $n$-TET systems are capable
of producing mallalieu rows, and if so, how many. Unfortunately, answering this question
is not as straightforward as the above discussion, since we can no longer rely on
the isomorphism that constitutes the proof of \ref{lewin-mallalieu}. We shall reformulate
this question at the end of the present chapter, after having covered more of what has
been already done.

%--------------------------------------------------------------------------
If, on one hand, we only get one $\T_n\M\I$ row class with the mallalieu property in
12 tones, we do get considerably more row classes when we relax the requirement that a row
produce a transposition of itself when taking every $n^\text{th}$ of its elements.
This idea is explored in part by \cite{Mead1989}, however without specifying
any combinatorial aspect (in the mathematical sense) of this generalization. Moreover,
we can certainly go beyond \cite{Mead1989} and investigate, in 12 tones, what an
extension of the mallalieu property could yield under operations other than transposition.
